!function(e){var t={};function o(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(n,s,function(t){return e[t]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlazorStateName="BlazorState",t.DevToolsName="devTools",t.InitializeJavaScriptInteropName="InitializeJavaScriptInterop",t.JsonRequestHandlerMethodName="Handle",t.JsonRequestHandlerName="jsonRequestHandler",t.ReduxDevToolsFactoryName="ReduxDevToolsFactory",t.ReduxDevToolsName="reduxDevTools",t.ReduxExtensionName="__REDUX_DEVTOOLS_EXTENSION__"},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(2),s=o(3),i=o(0);function a(e){console.log("InitializeJavaScriptInterop"),window[i.JsonRequestHandlerName]=e}function r(){const e=new s.ReduxDevTools;return window[i.ReduxDevToolsName]=e,e.IsEnabled}console.log("Initialize BlazorState"),"undefined"==typeof window||window[i.BlazorStateName]||(window[i.BlazorStateName]=new n.BlazorState,window[i.InitializeJavaScriptInteropName]=a,window[i.ReduxDevToolsFactoryName]=r)},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function r(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?s(e.value):new o(function(t){t(e.value)}).then(a,r)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const s=o(0);t.BlazorState=class{DispatchRequest(e,t){return n(this,void 0,void 0,function*(){const o=JSON.stringify(t);console.log(`Dispatching request of Type ${e}: ${o}`),yield window[s.JsonRequestHandlerName].invokeMethodAsync(s.JsonRequestHandlerMethodName,e,o)})}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.ReduxDevTools=class{constructor(){this.MessageHandler=e=>{console.log("ReduxDevTools.MessageHandler"),console.log(e);const t=this.MapRequestType(e);t?this.BlazorState.DispatchRequest(t,e):console.log("messages of this type are currently not supported")},this.BlazorState=window[n.BlazorStateName],this.Config={name:"Blazor State",features:{pause:!1,lock:!1,persist:!1,export:!1,import:!1,jump:!1,skip:!1,reorder:!1,dispatch:!1,test:!1}},this.Extension=this.GetExtension(),this.DevTools=this.GetDevTools(),this.IsEnabled=!!this.DevTools,this.Init()}Init(){this.IsEnabled&&(this.DevTools.subscribe(this.MessageHandler),window[n.DevToolsName]=this.DevTools)}GetExtension(){const e=window[n.ReduxExtensionName];return e||console.log("Redux DevTools are not installed."),e}GetDevTools(){const e=this.Extension&&this.Extension.connect(this.Config);return e||console.log("Unable to connect to Redux DevTools."),e}MapRequestType(e){var t,o={COMMIT:void 0,IMPORT_STATE:void 0,JUMP_TO_ACTION:"BlazorState.Pipeline.ReduxDevTools.JumpToStateRequest",JUMP_TO_STATE:"BlazorState.Pipeline.ReduxDevTools.JumpToStateRequest",RESET:void 0,ROLLBACK:void 0,TOGGLE_ACTION:void 0};switch(e.type){case"START":t="BlazorState.Pipeline.ReduxDevTools.StartRequest";break;case"STOP":break;case"DISPATCH":t=o[e.payload.type]}return t&&console.log(`Redux Dev tools type: ${e.type} maps to ${t}`),t}ReduxDevToolsDispatch(e,t){return"init"===e?window[n.DevToolsName].init(t):window[n.DevToolsName].send(e,t)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvSW5pdGlhbGl6ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQmxhem9yU3RhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1JlZHV4RGV2VG9vbHMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJCbGF6b3JTdGF0ZU5hbWUiLCJEZXZUb29sc05hbWUiLCJJbml0aWFsaXplSmF2YVNjcmlwdEludGVyb3BOYW1lIiwiSnNvblJlcXVlc3RIYW5kbGVyTWV0aG9kTmFtZSIsIkpzb25SZXF1ZXN0SGFuZGxlck5hbWUiLCJSZWR1eERldlRvb2xzRmFjdG9yeU5hbWUiLCJSZWR1eERldlRvb2xzTmFtZSIsIlJlZHV4RXh0ZW5zaW9uTmFtZSIsIkJsYXpvclN0YXRlXzEiLCJSZWR1eERldlRvb2xzXzEiLCJDb25zdGFudHNfMSIsIkluaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcCIsIkpzb25SZXF1ZXN0SGFuZGxlciIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJSZWR1eERldlRvb2xzRmFjdG9yeSIsInJlZHV4RGV2VG9vbHMiLCJSZWR1eERldlRvb2xzIiwiSXNFbmFibGVkIiwiQmxhem9yU3RhdGUiLCJbb2JqZWN0IE9iamVjdF0iLCJyZXF1ZXN0VHlwZUZ1bGxOYW1lIiwicmVxdWVzdCIsInJlcXVlc3RBc0pzb24iLCJKU09OIiwic3RyaW5naWZ5IiwiaW52b2tlTWV0aG9kQXN5bmMiLCJ0aGlzIiwiTWVzc2FnZUhhbmRsZXIiLCJtZXNzYWdlIiwicmVxdWVzdFR5cGUiLCJNYXBSZXF1ZXN0VHlwZSIsIkRpc3BhdGNoUmVxdWVzdCIsIkNvbmZpZyIsImZlYXR1cmVzIiwicGF1c2UiLCJsb2NrIiwicGVyc2lzdCIsImV4cG9ydCIsImltcG9ydCIsImp1bXAiLCJza2lwIiwicmVvcmRlciIsImRpc3BhdGNoIiwidGVzdCIsIkV4dGVuc2lvbiIsIkdldEV4dGVuc2lvbiIsIkRldlRvb2xzIiwiR2V0RGV2VG9vbHMiLCJJbml0Iiwic3Vic2NyaWJlIiwiZXh0ZW5zaW9uIiwiZGV2VG9vbHMiLCJjb25uZWN0IiwiYmxhem9yUmVxdWVzdFR5cGUiLCJkaXNwYXRjaFJlcXVlc3RzIiwiQ09NTUlUIiwidW5kZWZpbmVkIiwiSU1QT1JUX1NUQVRFIiwiSlVNUF9UT19BQ1RJT04iLCJKVU1QX1RPX1NUQVRFIiwiUkVTRVQiLCJST0xMQkFDSyIsIlRPR0dMRV9BQ1RJT04iLCJ0eXBlIiwicGF5bG9hZCIsImFjdGlvbiIsInN0YXRlIiwiaW5pdCIsInNlbmQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxF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dGF0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImV4cG9ydCBjb25zdCBCbGF6b3JTdGF0ZU5hbWU6IHN0cmluZyA9IFwiQmxhem9yU3RhdGVcIjtcclxuZXhwb3J0IGNvbnN0IERldlRvb2xzTmFtZTogc3RyaW5nID0gXCJkZXZUb29sc1wiXHJcbmV4cG9ydCBjb25zdCBJbml0aWFsaXplSmF2YVNjcmlwdEludGVyb3BOYW1lOiBzdHJpbmcgPSBcIkluaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcFwiO1xyXG5leHBvcnQgY29uc3QgSnNvblJlcXVlc3RIYW5kbGVyTWV0aG9kTmFtZTogc3RyaW5nID0gXCJIYW5kbGVcIjtcclxuZXhwb3J0IGNvbnN0IEpzb25SZXF1ZXN0SGFuZGxlck5hbWU6IHN0cmluZyA9IFwianNvblJlcXVlc3RIYW5kbGVyXCI7XHJcbmV4cG9ydCBjb25zdCBSZWR1eERldlRvb2xzRmFjdG9yeU5hbWU6IHN0cmluZyA9IFwiUmVkdXhEZXZUb29sc0ZhY3RvcnlcIjtcclxuZXhwb3J0IGNvbnN0IFJlZHV4RGV2VG9vbHNOYW1lOiBzdHJpbmcgPSBcInJlZHV4RGV2VG9vbHNcIjtcclxuZXhwb3J0IGNvbnN0IFJlZHV4RXh0ZW5zaW9uTmFtZTogc3RyaW5nID0gXCJfX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9fXCI7XHJcbiIsImltcG9ydCB7IEJsYXpvclN0YXRlIH0gZnJvbSAnLi9CbGF6b3JTdGF0ZSc7XHJcbmltcG9ydCB7IFJlZHV4RGV2VG9vbHN9IGZyb20gJy4vUmVkdXhEZXZUb29scyc7XHJcbmltcG9ydCB7XHJcbiAgQmxhem9yU3RhdGVOYW1lLFxyXG4gIEluaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcE5hbWUsXHJcbiAgSnNvblJlcXVlc3RIYW5kbGVyTmFtZSxcclxuICBSZWR1eERldlRvb2xzRmFjdG9yeU5hbWUsXHJcbiAgUmVkdXhEZXZUb29sc05hbWUsXHJcbn0gZnJvbSAnLi9Db25zdGFudHMnO1xyXG5cclxuZnVuY3Rpb24gSW5pdGlhbGl6ZUphdmFTY3JpcHRJbnRlcm9wKEpzb25SZXF1ZXN0SGFuZGxlcikge1xyXG4gIGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6ZUphdmFTY3JpcHRJbnRlcm9wXCIpO1xyXG4gIHdpbmRvd1tKc29uUmVxdWVzdEhhbmRsZXJOYW1lXSA9IEpzb25SZXF1ZXN0SGFuZGxlcjtcclxufTtcclxuXHJcblxyXG5mdW5jdGlvbiBJbml0aWFsaXplKCkge1xyXG4gIGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6ZSBCbGF6b3JTdGF0ZVwiKTtcclxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpbmRvd1tCbGF6b3JTdGF0ZU5hbWVdKSB7XHJcbiAgICB3aW5kb3dbQmxhem9yU3RhdGVOYW1lXSA9IG5ldyBCbGF6b3JTdGF0ZSgpO1xyXG4gICAgd2luZG93W0luaXRpYWxpemVKYXZhU2NyaXB0SW50ZXJvcE5hbWVdID0gSW5pdGlhbGl6ZUphdmFTY3JpcHRJbnRlcm9wO1xyXG4gICAgd2luZG93W1JlZHV4RGV2VG9vbHNGYWN0b3J5TmFtZV0gPSBSZWR1eERldlRvb2xzRmFjdG9yeTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIFJlZHV4RGV2VG9vbHNGYWN0b3J5KCk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHJlZHV4RGV2VG9vbHMgPSBuZXcgUmVkdXhEZXZUb29scygpO1xyXG4gIHdpbmRvd1tSZWR1eERldlRvb2xzTmFtZV0gPSByZWR1eERldlRvb2xzO1xyXG4gIHJldHVybiByZWR1eERldlRvb2xzLklzRW5hYmxlZDtcclxufVxyXG5cclxuSW5pdGlhbGl6ZSgpOyIsImltcG9ydCB7ICBKc29uUmVxdWVzdEhhbmRsZXJNZXRob2ROYW1lLCBKc29uUmVxdWVzdEhhbmRsZXJOYW1lIH0gZnJvbSAnLi9Db25zdGFudHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJsYXpvclN0YXRlIHtcclxuICBhc3luYyBEaXNwYXRjaFJlcXVlc3QocmVxdWVzdFR5cGVGdWxsTmFtZTogc3RyaW5nLCByZXF1ZXN0OiBhbnkgKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0QXNKc29uID0gSlNPTi5zdHJpbmdpZnkocmVxdWVzdCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coYERpc3BhdGNoaW5nIHJlcXVlc3Qgb2YgVHlwZSAke3JlcXVlc3RUeXBlRnVsbE5hbWV9OiAke3JlcXVlc3RBc0pzb259YCk7XHJcbiAgICBhd2FpdCB3aW5kb3dbSnNvblJlcXVlc3RIYW5kbGVyTmFtZV0uaW52b2tlTWV0aG9kQXN5bmMoSnNvblJlcXVlc3RIYW5kbGVyTWV0aG9kTmFtZSwgcmVxdWVzdFR5cGVGdWxsTmFtZSwgcmVxdWVzdEFzSnNvbik7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgQmxhem9yU3RhdGUgfSBmcm9tICcuL0JsYXpvclN0YXRlJztcclxuaW1wb3J0IHsgQmxhem9yU3RhdGVOYW1lLCBSZWR1eEV4dGVuc2lvbk5hbWUsIERldlRvb2xzTmFtZSwgUmVkdXhEZXZUb29sc05hbWUgfSBmcm9tICcuL0NvbnN0YW50cyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVkdXhEZXZUb29scyB7XHJcbiAgSXNFbmFibGVkOiBib29sZWFuO1xyXG4gIERldlRvb2xzOiBhbnk7XHJcbiAgRXh0ZW5zaW9uOiBhbnk7XHJcbiAgQ29uZmlnOiB7IG5hbWU6IHN0cmluZzsgZmVhdHVyZXM6IHsgcGF1c2U6IGJvb2xlYW47IGxvY2s6IGJvb2xlYW47IHBlcnNpc3Q6IGJvb2xlYW47IGV4cG9ydDogYm9vbGVhbjsgaW1wb3J0OiBib29sZWFuOyBqdW1wOiBib29sZWFuOyBza2lwOiBib29sZWFuOyByZW9yZGVyOiBib29sZWFuOyBkaXNwYXRjaDogYm9vbGVhbjsgdGVzdDogYm9vbGVhbjsgfTsgfTtcclxuICBCbGF6b3JTdGF0ZTogQmxhem9yU3RhdGU7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5CbGF6b3JTdGF0ZSA9IHdpbmRvd1tCbGF6b3JTdGF0ZU5hbWVdOyAvLyBEZXBlbmRzIG9uIHRoaXMgZnVuY3Rpb25hbGl0eVxyXG4gICAgdGhpcy5Db25maWcgPSB7XHJcbiAgICAgIG5hbWU6ICdCbGF6b3IgU3RhdGUnLFxyXG4gICAgICBmZWF0dXJlczoge1xyXG4gICAgICAgIHBhdXNlOiBmYWxzZSwgLy8gc3RhcnQvcGF1c2UgcmVjb3JkaW5nIG9mIGRpc3BhdGNoZWQgYWN0aW9uc1xyXG4gICAgICAgIGxvY2s6IGZhbHNlLCAvLyBsb2NrL3VubG9jayBkaXNwYXRjaGluZyBhY3Rpb25zIGFuZCBzaWRlIGVmZmVjdHNcclxuICAgICAgICBwZXJzaXN0OiBmYWxzZSwgLy8gcGVyc2lzdCBzdGF0ZXMgb24gcGFnZSByZWxvYWRpbmdcclxuICAgICAgICBleHBvcnQ6IGZhbHNlLCAvLyBleHBvcnQgaGlzdG9yeSBvZiBhY3Rpb25zIGluIGEgZmlsZVxyXG4gICAgICAgIGltcG9ydDogZmFsc2UsIC8vIGltcG9ydCBoaXN0b3J5IG9mIGFjdGlvbnMgZnJvbSBhIGZpbGVcclxuICAgICAgICBqdW1wOiBmYWxzZSwgLy8ganVtcCBiYWNrIGFuZCBmb3J0aCAodGltZSB0cmF2ZWxpbmcpXHJcbiAgICAgICAgc2tpcDogZmFsc2UsIC8vIHNraXAgKGNhbmNlbCkgYWN0aW9uc1xyXG4gICAgICAgIHJlb3JkZXI6IGZhbHNlLCAvLyBkcmFnIGFuZCBkcm9wIGFjdGlvbnMgaW4gdGhlIGhpc3RvcnkgbGlzdFxyXG4gICAgICAgIGRpc3BhdGNoOiBmYWxzZSwgLy8gZGlzcGF0Y2ggY3VzdG9tIGFjdGlvbnMgb3IgYWN0aW9uIGNyZWF0b3JzXHJcbiAgICAgICAgdGVzdDogZmFsc2UgLy8gZ2VuZXJhdGUgdGVzdHMgZm9yIHRoZSBzZWxlY3RlZCBhY3Rpb25zXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLkV4dGVuc2lvbiA9IHRoaXMuR2V0RXh0ZW5zaW9uKCk7XHJcbiAgICB0aGlzLkRldlRvb2xzID0gdGhpcy5HZXREZXZUb29scygpO1xyXG4gICAgdGhpcy5Jc0VuYWJsZWQgPSB0aGlzLkRldlRvb2xzID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgdGhpcy5Jbml0KCk7XHJcbiAgfVxyXG5cclxuICBJbml0KCkge1xyXG4gICAgaWYgKHRoaXMuSXNFbmFibGVkKSB7XHJcbiAgICAgIHRoaXMuRGV2VG9vbHMuc3Vic2NyaWJlKHRoaXMuTWVzc2FnZUhhbmRsZXIpO1xyXG4gICAgICB3aW5kb3dbRGV2VG9vbHNOYW1lXSA9IHRoaXMuRGV2VG9vbHM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBHZXRFeHRlbnNpb24oKSB7XHJcbiAgICBjb25zdCBleHRlbnNpb24gPSB3aW5kb3dbUmVkdXhFeHRlbnNpb25OYW1lXTtcclxuXHJcbiAgICBpZiAoIWV4dGVuc2lvbikge1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVkdXggRGV2VG9vbHMgYXJlIG5vdCBpbnN0YWxsZWQuJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXh0ZW5zaW9uO1xyXG4gIH1cclxuXHJcbiAgR2V0RGV2VG9vbHMoKSB7XHJcbiAgICBjb25zdCBkZXZUb29scyA9IHRoaXMuRXh0ZW5zaW9uICYmIHRoaXMuRXh0ZW5zaW9uLmNvbm5lY3QodGhpcy5Db25maWcpO1xyXG4gICAgaWYgKCFkZXZUb29scykge1xyXG4gICAgICBjb25zb2xlLmxvZygnVW5hYmxlIHRvIGNvbm5lY3QgdG8gUmVkdXggRGV2VG9vbHMuJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGV2VG9vbHM7XHJcbiAgfVxyXG5cclxuICBNYXBSZXF1ZXN0VHlwZShtZXNzYWdlKSB7XHJcbiAgICB2YXIgZGlzcGF0Y2hSZXF1ZXN0cyA9IHtcclxuICAgICAgJ0NPTU1JVCc6IHVuZGVmaW5lZCxcclxuICAgICAgJ0lNUE9SVF9TVEFURSc6IHVuZGVmaW5lZCxcclxuICAgICAgJ0pVTVBfVE9fQUNUSU9OJzogJ0JsYXpvclN0YXRlLlBpcGVsaW5lLlJlZHV4RGV2VG9vbHMuSnVtcFRvU3RhdGVSZXF1ZXN0JyxcclxuICAgICAgJ0pVTVBfVE9fU1RBVEUnOiAnQmxhem9yU3RhdGUuUGlwZWxpbmUuUmVkdXhEZXZUb29scy5KdW1wVG9TdGF0ZVJlcXVlc3QnLFxyXG4gICAgICAnUkVTRVQnOiB1bmRlZmluZWQsXHJcbiAgICAgICdST0xMQkFDSyc6IHVuZGVmaW5lZCxcclxuICAgICAgJ1RPR0dMRV9BQ1RJT04nOiB1bmRlZmluZWRcclxuICAgIH07XHJcbiAgICB2YXIgYmxhem9yUmVxdWVzdFR5cGU7XHJcbiAgICBzd2l0Y2ggKG1lc3NhZ2UudHlwZSkge1xyXG4gICAgICBjYXNlICdTVEFSVCc6XHJcbiAgICAgICAgYmxhem9yUmVxdWVzdFR5cGUgPSAnQmxhem9yU3RhdGUuUGlwZWxpbmUuUmVkdXhEZXZUb29scy5TdGFydFJlcXVlc3QnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdTVE9QJzpcclxuICAgICAgICAvL2JsYXpvclJlcXVlc3RUeXBlID0gJ0JsYXpvclN0YXRlLlBpcGVsaW5lLlJlZHV4RGV2VG9vbHMuU3RvcFJlcXVlc3QnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdESVNQQVRDSCc6XHJcbiAgICAgICAgYmxhem9yUmVxdWVzdFR5cGUgPSBkaXNwYXRjaFJlcXVlc3RzW21lc3NhZ2UucGF5bG9hZC50eXBlXTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGJsYXpvclJlcXVlc3RUeXBlICYmXHJcbiAgICAgIGNvbnNvbGUubG9nKGBSZWR1eCBEZXYgdG9vbHMgdHlwZTogJHttZXNzYWdlLnR5cGV9IG1hcHMgdG8gJHtibGF6b3JSZXF1ZXN0VHlwZX1gKTtcclxuXHJcbiAgICByZXR1cm4gYmxhem9yUmVxdWVzdFR5cGU7XHJcbiAgfVxyXG5cclxuICBNZXNzYWdlSGFuZGxlciA9IChtZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnUmVkdXhEZXZUb29scy5NZXNzYWdlSGFuZGxlcicpO1xyXG4gICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICB2YXIganNvblJlcXVlc3Q7XHJcbiAgICBjb25zdCByZXF1ZXN0VHlwZSA9IHRoaXMuTWFwUmVxdWVzdFR5cGUobWVzc2FnZSk7XHJcbiAgICBpZiAocmVxdWVzdFR5cGUpIHsgLy8gSWYgd2UgZG9uJ3QgbWFwIHRoaXMgdHlwZSB0aGVuIHRoZXJlIGlzIG5vdGhpbmcgdG8gZGlzcGF0Y2gganVzdCBpZ25vcmUuXHJcbiAgICAgIGpzb25SZXF1ZXN0ID0ge1xyXG4gICAgICAgIC8vIFRPRE86IG1ha2Ugc3VyZSBub24gUmVxdWVzdHMgZnJvbSBhc3NlbWJsaWVzIG90aGVyIHRoYW4gQmxhem9yU3RhdGUgYWxzbyB3b3JrLlxyXG4gICAgICAgIFJlcXVlc3RUeXBlOiByZXF1ZXN0VHlwZSxcclxuICAgICAgICBQYXlsb2FkOiBtZXNzYWdlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICB0aGlzLkJsYXpvclN0YXRlLkRpc3BhdGNoUmVxdWVzdChyZXF1ZXN0VHlwZSwgbWVzc2FnZSk7XHJcbiAgICB9IGVsc2VcclxuICAgICAgY29uc29sZS5sb2coYG1lc3NhZ2VzIG9mIHRoaXMgdHlwZSBhcmUgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWRgKTtcclxuICB9XHJcblxyXG4gIFJlZHV4RGV2VG9vbHNEaXNwYXRjaChhY3Rpb24sIHN0YXRlKSB7XHJcbiAgICBpZiAoYWN0aW9uID09PSAnaW5pdCcpIHtcclxuICAgICAgcmV0dXJuIHdpbmRvd1tEZXZUb29sc05hbWVdLmluaXQoc3RhdGUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHJldHVybiB3aW5kb3dbRGV2VG9vbHNOYW1lXS5zZW5kKGFjdGlvbiwgc3RhdGUpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=